<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lumora — Play. Learn. Shine.</title>
  <style>
    :root{ --bg:#0f1724; --card:#0b1220; --accent:#7dd3fc; --muted:#94a3b8; --glass: rgba(255,255,255,0.04); }
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial}
    body{margin:0;background:linear-gradient(180deg,#071025 0%, #071a2b 100%);color:#e6eef8;min-height:100vh}
    header{display:flex;align-items:center;gap:16px;padding:18px 24px;border-bottom:1px solid rgba(255,255,255,0.04)}
    .logo{width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,#0ea5e9,#60a5fa);display:flex;align-items:center;justify-content:center;font-weight:700;color:#022;box-shadow:0 6px 18px rgba(8,145,178,0.12)}
    h1{font-size:20px;margin:0}
    main{display:grid;grid-template-columns:320px 1fr;gap:20px;padding:24px}
    nav{background:var(--card);padding:18px;border-radius:14px;height:calc(100vh - 120px);overflow:auto}
    nav button{display:block;width:100%;text-align:left;padding:12px;border-radius:10px;border:0;background:transparent;color:var(--muted);margin-bottom:8px;cursor:pointer}
    nav button.active{background:linear-gradient(90deg, rgba(125,211,252,0.08), rgba(96,165,250,0.04));color:var(--accent);font-weight:600}
    .panel{background:var(--card);padding:18px;border-radius:14px;min-height:200px}
    .stats{display:flex;gap:12px;align-items:center}
    .coin{background:linear-gradient(90deg,#f59e0b,#f97316);padding:6px 10px;border-radius:999px;color:#04111a;font-weight:700}
    section{padding:12px}
    .game-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px}
    .card{background:var(--glass);padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
    .small{font-size:13px;color:var(--muted)}
    /* breathing visual */
    .breath-wrap{display:flex;flex-direction:column;align-items:center;gap:12px}
    .bubble{width:120px;height:120px;border-radius:999px;background:rgba(125,211,252,0.12);display:flex;align-items:center;justify-content:center;border:2px solid rgba(125,211,252,0.16);transition:all 1s ease}
    .controls{display:flex;gap:8px}
    .btn{padding:8px 12px;border-radius:10px;border:0;background:linear-gradient(90deg,#0ea5e9,#60a5fa);color:#022;font-weight:600;cursor:pointer}
    /* memory game */
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
    .tile{aspect-ratio:1/1;border-radius:8px;background:linear-gradient(180deg,#071b2a,#052034);display:flex;align-items:center;justify-content:center;font-size:28px;cursor:pointer;border:1px solid rgba(255,255,255,0.02)}
    .tile.flipped{background:#e6eef8;color:#022}
    /* quiz */
    .options{display:flex;flex-direction:column;gap:8px}
    .option{padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);cursor:pointer}
    .option.correct{background:rgba(34,197,94,0.12);border-color:rgba(34,197,94,0.22)}
    .option.wrong{background:rgba(239,68,68,0.08);border-color:rgba(239,68,68,0.16)}
    footer{padding:14px;text-align:center;color:var(--muted);font-size:13px}
    .badge-row{display:flex;gap:8px;flex-wrap:wrap}
    .badge{padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.03);font-size:13px}
    @media (max-width:900px){main{grid-template-columns:1fr}nav{height:auto}}
  </style>
</head>
<body>
  <header>
    <div class="logo">L</div>
    <div>
      <h1>Lumora — Play. Learn. Shine.</h1>
      <div class="small">Mini wellness & learning hub — games, tasks, rewards</div>
    </div>
    <div style="margin-left:auto" class="stats">
      <div class="coin" id="coinCount">0 ✨</div>
    </div>
  </header>
  <main>
    <nav>
      <button class="active" data-view="dashboard">Dashboard</button>
      <button data-view="breath">Comfort: Breathing</button>
      <button data-view="memory">Memory & Focus</button>
      <button data-view="eyehand">Eye & Hand</button>
      <button data-view="quiz">Knowledge Quiz</button>
      <button data-view="rewards">Rewards & Badges</button>
    </nav>
    <div style="display:flex;flex-direction:column;gap:14px">
      <div class="panel" id="viewArea">
        <!-- dynamic content injected here -->
      </div>
      <div class="panel small">
        <strong>How this app maps to Lumora pillars</strong>
        <div class="small" style="margin-top:8px">Comfort — guided breathing. Memory & Focus — matching game. Eye & Hand — sequence taps. Knowledge — short quizzes. Complete tasks to earn coins and badges (stored locally).</div>
      </div>
    </div>
  </main>
  <footer>
    Built for demonstration • Save progress in your browser • Open-source-friendly
  </footer>

<script>
// --- App state & persistence ---
const state = {
  coins: Number(localStorage.getItem('lumora_coins')||0),
  badges: JSON.parse(localStorage.getItem('lumora_badges')||'[]'),
  leaderboard: JSON.parse(localStorage.getItem('lumora_lb')||'{}')
}
function save(){
  localStorage.setItem('lumora_coins', state.coins);
  localStorage.setItem('lumora_badges', JSON.stringify(state.badges));
}
function refreshUI(){
  document.getElementById('coinCount').textContent = state.coins + ' ✨';
}
refreshUI();

// --- Navigation ---
const navButtons = document.querySelectorAll('nav button');
const viewArea = document.getElementById('viewArea');
navButtons.forEach(b=>b.addEventListener('click',()=>{
  navButtons.forEach(x=>x.classList.remove('active'));
  b.classList.add('active');
  renderView(b.dataset.view);
}))

// --- Views ---
function renderView(v){
  if(v==='dashboard') return renderDashboard();
  if(v==='breath') return renderBreath();
  if(v==='memory') return renderMemory();
  if(v==='eyehand') return renderEyeHand();
  if(v==='quiz') return renderQuiz();
  if(v==='rewards') return renderRewards();
}

// Dashboard
function renderDashboard(){
  viewArea.innerHTML = `
    <section>
      <h2>Welcome to Lumora</h2>
      <p class="small">Pick a pillar on the left and try a short activity. Earn coins for completing tasks and showcase badges in Rewards.</p>
      <div style="margin-top:12px" class="game-grid">
        <div class="card"><strong>Quick start</strong><div class="small">Try: Breathing (1 min) → Memory (2 rounds) → Quiz (1 question)</div></div>
        <div class="card"><strong>Progress</strong><div class="small">Coins: ${state.coins} • Badges: ${state.badges.length}</div></div>
        <div class="card"><strong>Tips</strong><div class="small">Do mindful breaks between rounds and avoid rushing. Quality > quantity.</div></div>
      </div>
    </section>`;
}

// Breathing exercise
function renderBreath(){
  viewArea.innerHTML = `
    <section>
      <h2>Comfort Game — Guided Breathing</h2>
      <div class="breath-wrap">
        <div class="bubble" id="bubble">Relax</div>
        <div class="small">Follow the size changes: inhale (grow) — hold — exhale (shrink). 1 round = 6 breaths.</div>
        <div class="controls">
          <button class="btn" id="startBreath">Start 6-breath round</button>
          <button class="btn" id="skipBreath">Complete (+5 coins)</button>
        </div>
      </div>
    </section>`;
  const bubble = document.getElementById('bubble');
  let running=false; let breaths=0; let timer;
  document.getElementById('startBreath').onclick = ()=>{
    if(running) return; running=true; breaths=0; bubble.textContent='Inhale';
    timer = setInterval(()=>{
      breaths++;
      // cycle: inhale (grow), hold (no change), exhale (shrink)
      const phase = breaths % 3;
      if(phase===1){ bubble.style.transform='scale(1.25)'; bubble.textContent='Inhale'; }
      else if(phase===2){ bubble.style.transform='scale(1.15)'; bubble.textContent='Hold'; }
      else { bubble.style.transform='scale(0.85)'; bubble.textContent='Exhale'; }
      if(Math.floor(breaths/3) >= 6){
        clearInterval(timer); running=false; bubble.style.transform='scale(1)'; bubble.textContent='Nice!';
        awardCoins(5,'Completed breathing round');
      }
    },1200);
  }
  document.getElementById('skipBreath').onclick = ()=>{ awardCoins(5,'Skipped to reward (breath)'); }
}

// Memory matching game (4x4)
function renderMemory(){
  viewArea.innerHTML = `
    <section>
      <h2>Memory & Focus — Matching Game</h2>
      <div class="small">Flip tiles and find pairs. Complete 6 pairs to finish. Finish = +10 coins</div>
      <div style="margin-top:12px" id="memoryBoard" class="grid"></div>
      <div style="margin-top:10px" class="controls"><button class="btn" id="resetMem">New Board</button></div>
    </section>`;
  const board = document.getElementById('memoryBoard');
  const icons = ['★','❤','●','▲','■','◆','☼','♫'];
  let deck = shuffle([...icons,...icons]);
  let flipped = []; let matchedCount=0;
  function build(){
    board.innerHTML='';
    deck.forEach((v,i)=>{
      const t=document.createElement('div'); t.className='tile'; t.dataset.val=v; t.dataset.i=i; t.textContent='';
      t.addEventListener('click',()=>{ if(t.classList.contains('flipped')) return; flipTile(t); });
      board.appendChild(t);
    })
  }
  function flipTile(t){
    t.classList.add('flipped'); t.textContent=t.dataset.val;
    flipped.push(t);
    if(flipped.length===2){
      const [a,b]=flipped;
      if(a.dataset.val===b.dataset.val){
        matchedCount++; a.style.pointerEvents='none'; b.style.pointerEvents='none';
        flipped=[];
        if(matchedCount>=8){ awardCoins(10,'Completed memory game'); }
      } else {
        setTimeout(()=>{ a.classList.remove('flipped'); a.textContent=''; b.classList.remove('flipped'); b.textContent=''; flipped=[]; },800);
      }
    }
  }
  document.getElementById('resetMem').onclick = ()=>{ deck = shuffle(deck); matchedCount=0; flipped=[]; build(); }
  build();
}

// Eye & Hand exercise — click the sequence
function renderEyeHand(){
  viewArea.innerHTML = `
    <section>
      <h2>Eye & Hand — Follow the Lights</h2>
      <div class="small">Watch the sequence and repeat. Repeat 4 correct sequences to earn coins.</div>
      <div style="margin-top:12px;display:flex;gap:10px;justify-content:center" id="ehGrid"></div>
      <div style="margin-top:12px" class="controls"><button class="btn" id="startSeq">Start Sequence</button></div>
    </section>`;
  const grid = document.getElementById('ehGrid');
  grid.innerHTML='';
  const pads=[]; for(let i=0;i<4;i++){ const p=document.createElement('div'); p.className='tile'; p.style.width='80px'; p.style.height='80px'; p.textContent=i+1; grid.appendChild(p); pads.push(p); }
  let sequence=[]; let player=[]; let round=0;
  document.getElementById('startSeq').onclick = async ()=>{
    round=0; sequence=[]; player=[]; await nextRound();
  }
  async function nextRound(){
    round++; sequence.push(randInt(0,3)); await playSeq(); player=[];
  }
  function playSeq(){
    return new Promise(resolve=>{
      let i=0; const it=setInterval(()=>{
        const idx = sequence[i]; flash(pads[idx]); i++;
        if(i>=sequence.length){ clearInterval(it); setTimeout(resolve,500); }
      },700);
    })
  }
  pads.forEach((p,idx)=>p.addEventListener('click',()=>{
    player.push(idx); flash(p);
    const cur = player.length-1;
    if(sequence[cur]!==player[cur]){ alert('Oops — try again'); player=[]; }
    else if(player.length===sequence.length){
      if(round>=4){ awardCoins(8,'Completed sequence rounds'); } else { setTimeout(nextRound,500); }
    }
  }))
  function flash(el){ el.style.transform='scale(1.08)'; el.style.background='rgba(125,211,252,0.16)'; setTimeout(()=>{ el.style.transform=''; el.style.background=''; },250); }
}

// Knowledge Quiz
function renderQuiz(){
  const q = sampleQuiz();
  viewArea.innerHTML = `
    <section>
      <h2>Knowledge Challenge — Quick Quiz</h2>
      <div class="small">Answer correctly to earn coins. Questions are brief and friendly.</div>
      <div style="margin-top:12px"><strong>${q.q}</strong></div>
      <div class="options" id="opts"></div>
    </section>`;
  const opts = document.getElementById('opts');
  q.options.forEach((opt,i)=>{
    const d = document.createElement('div'); d.className='option'; d.textContent = opt; d.addEventListener('click',()=>{
      if(i===q.a){ d.classList.add('correct'); awardCoins(6,'Answered quiz correctly'); }
      else { d.classList.add('wrong'); if(q.explain) alert('Hint: '+q.explain); }
      Array.from(opts.children).forEach(x=>x.style.pointerEvents='none');
    }); opts.appendChild(d);
  })
}

// Rewards & badges
function renderRewards(){
  viewArea.innerHTML = `
    <section>
      <h2>Rewards & Badges</h2>
      <div class="small">Spend coins to unlock simple badges. Badges are cosmetic tokens of progress stored locally.</div>
      <div style="margin-top:12px" class="badge-row" id="badgeRow"></div>
      <div style="margin-top:12px"><button class="btn" id="resetAll">Reset Progress</button></div>
    </section>`;
  const badgeRow = document.getElementById('badgeRow');
  const catalog = [ {id:'calm',title:'Calm Starter',cost:10},{id:'focus',title:'Focus Finder',cost:20},{id:'star',title:'Lumora Star',cost:40} ];
  function build(){
    badgeRow.innerHTML='';
    catalog.forEach(b=>{
      const el=document.createElement('div'); el.className='badge';
      const owned = state.badges.includes(b.id);
      el.innerHTML = `<strong>${b.title}</strong><div class='small'>${owned? 'Owned':'Cost: '+b.cost+' ✨'}</div>`;
      if(!owned){ const btn=document.createElement('button'); btn.className='btn'; btn.style.marginLeft='8px'; btn.textContent='Buy'; btn.onclick=()=>{ if(state.coins>=b.cost){ state.coins-=b.cost; state.badges.push(b.id); save(); refreshUI(); build(); alert('Unlocked '+b.title); } else alert('Not enough coins'); }; el.appendChild(btn); }
      badgeRow.appendChild(el);
    })
  }
  document.getElementById('resetAll').onclick = ()=>{ if(confirm('Reset coins and badges?')){ state.coins=0; state.badges=[]; save(); refreshUI(); build(); }}
  build();
}

// --- Utilities ---
function awardCoins(n,reason){ state.coins += n; save(); refreshUI(); showToast(`+${n} ✨ — ${reason}`); }
function showToast(t){ const el=document.createElement('div'); el.textContent=t; el.style.position='fixed'; el.style.right='18px'; el.style.bottom='18px'; el.style.background='rgba(2,6,23,0.9)'; el.style.padding='10px 14px'; el.style.borderRadius='10px'; el.style.border='1px solid rgba(255,255,255,0.04)'; document.body.appendChild(el); setTimeout(()=>el.style.opacity='0',2200); setTimeout(()=>el.remove(),2600); }
function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a }
function randInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min }
function sampleQuiz(){
  const pool = [
    {q:'Which activity helps reduce stress quickly?', options:['Deep breathing','Scrolling social media','Running a marathon'], a:0, explain:'Deep breathing calms the nervous system.'},
    {q:'Which is good for focus?', options:['Short concentrated practice','Multitasking','Cramming all night'], a:0},
    {q:'How often should you take a short screen break?', options:['Every 20-30 minutes','Never','Only on weekends'], a:0}
  ];
  return pool[Math.floor(Math.random()*pool.length)];
}

// start on dashboard
renderView('dashboard');

</script>
</body>
</html>
